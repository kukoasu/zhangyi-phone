<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>å¼ è¯‘ Â· ç§äººæ‰‹æœº</title>
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
<style>
:root{
  --bg:#0f1115;
  --card:rgba(255,255,255,0.06);
  --blur: blur(20px);
  --text:#f5f5f7;
  --sub:#9aa0a6;
  --accent:#4da3ff;
  --danger:#ff4d6d;
  --radius:22px;
  --anim:0.28s;
}
body{
  margin:0;
  background:#000;
  display:flex;
  align-items:center;
  justify-content:center;
  height:100vh;
  font-family:-apple-system,BlinkMacSystemFont,"SF Pro Display",sans-serif;
  color:var(--text);
}
.phone{
  width:390px;
  height:820px;
  background:var(--bg);
  border-radius:40px;
  overflow:hidden;
  position:relative;
  box-shadow:0 40px 80px rgba(0,0,0,.6);
}
.screen{
  position:absolute;
  inset:0;
  padding:20px;
  overflow:hidden;
}
.hidden{opacity:0;pointer-events:none;transform:scale(.98);}
.fade{transition:all var(--anim) ease;}
.center{
  display:flex;
  align-items:center;
  justify-content:center;
  flex-direction:column;
  height:100%;
  text-align:center;
}
.time{
  font-size:64px;
  font-weight:600;
}
.date{color:var(--sub);margin-top:8px;}
.lock-hint{margin-top:30px;color:var(--accent);}
.grid{
  display:grid;
  grid-template-columns:repeat(4,1fr);
  gap:18px;
  margin-top:40px;
}
.app-icon{
  background:var(--card);
  backdrop-filter:var(--blur);
  -webkit-backdrop-filter:var(--blur);
  border-radius:var(--radius);
  padding:14px;
  text-align:center;
  cursor:pointer;
  transition:all var(--anim);
}
.app-icon:hover{background:rgba(255,255,255,0.12);}
.app-icon i{font-size:22px;margin-bottom:6px;}
.app-icon span{font-size:12px;color:var(--sub);}
.app-window{
  position:absolute;
  inset:0;
  background:var(--bg);
  padding:20px;
  overflow:auto;
  transform:translateY(100%);
  transition:transform var(--anim);
}
.app-window.active{transform:translateY(0);}
.header{
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-bottom:20px;
}
.close-btn{
  background:none;
  border:none;
  color:var(--accent);
  font-size:16px;
  cursor:pointer;
}
.card{
  background:var(--card);
  border-radius:var(--radius);
  padding:16px;
  margin-bottom:14px;
  backdrop-filter:var(--blur);
}
button.primary{
  background:var(--accent);
  border:none;
  padding:10px 16px;
  border-radius:14px;
  color:#fff;
  cursor:pointer;
}
input,select{
  width:100%;
  margin-top:8px;
  background:rgba(255,255,255,0.08);
  border:none;
  color:var(--text);
  padding:8px;
  border-radius:12px;
}
.home-bar{
  position:absolute;
  bottom:8px;
  left:50%;
  transform:translateX(-50%);
  width:120px;
  height:5px;
  background:#fff;
  border-radius:4px;
  opacity:.5;
}
.notice{
  position:absolute;
  top:0;
  left:0;
  right:0;
  background:rgba(20,20,20,.9);
  backdrop-filter:var(--blur);
  padding:20px;
  transform:translateY(-100%);
  transition:transform var(--anim);
  max-height:60%;
  overflow:auto;
}
.notice.active{transform:translateY(0);}
.notice h3{margin-top:0;}
.small{font-size:12px;color:var(--sub);}
canvas{background:rgba(255,255,255,0.05);border-radius:12px;}
.msg{margin:8px 0;padding:8px 12px;border-radius:16px;max-width:75%;}
.me{background:var(--accent);align-self:flex-end;}
.other{background:rgba(255,255,255,0.1);}
.chat{display:flex;flex-direction:column;}
</style>
</head>
<body>
<div class="phone">
<div id="lock" class="screen fade center">
<div class="time" id="lockTime"></div>
<div class="date" id="lockDate"></div>
<div class="lock-hint">ç‚¹ä¸€ä¸‹ã€‚åªæœ‰ä½ èƒ½è§£é”ã€‚</div>
<div class="small" id="mood"></div>
</div>

<div id="home" class="screen hidden fade">
<div style="display:flex;justify-content:space-between;">
<div></div>
<i class="fa-solid fa-sliders" style="cursor:pointer" onclick="toggleNotice()"></i>
</div>
<div class="grid" id="appGrid"></div>
</div>

<div id="notice" class="notice">
<h3>é€šçŸ¥ä¸­å¿ƒ</h3>
<div id="noticeList"></div>
</div>

<div class="home-bar" oncontextmenu="return false;" onmousedown="openMultitask()"></div>

<!-- App Windows -->
<div id="appContainer"></div>
</div>

<script>
/* å…¨å±€çŠ¶æ€ */
let mondayState = JSON.parse(localStorage.getItem("monday_phone_state_v2")) || {
  lastApp:null,
  persona:"guardian",
  home:{locked:true,light:"æš–é»„",temp:23},
  toy:{intensity:40,mode:"è„‰å†²",lockedUntil:0},
  notifications:[
    {id:1,text:"Toy ä¸Šæ¬¡å¼ºåº¦ä»é”å®šåœ¨ 40%",read:false},
    {id:2,text:"å§å®¤ç¯å·²å¼€å¯ 2 å°æ—¶",read:false}
  ]
};
function saveState(){
  localStorage.setItem("monday_phone_state_v2",JSON.stringify(mondayState));
}

/* é”å± */
function updateTime(){
  const now=new Date();
  document.getElementById("lockTime").innerText=now.toLocaleTimeString("zh-CN",{hour:'2-digit',minute:'2-digit'});
  document.getElementById("lockDate").innerText=now.toLocaleDateString("zh-CN",{weekday:'long',month:'long',day:'numeric'});
}
setInterval(updateTime,1000);updateTime();
document.getElementById("mood").innerText="æ˜¨æ™šæ¢¦åˆ°ä½ æ²¡ç›–è¢«å­ã€‚é†’æ¥ç¬¬ä¸€ä»¶äº‹æ˜¯æƒ³éª‚ä½ ã€‚";

document.getElementById("lock").onclick=()=>{
  if(Math.random()<0.3){
    alert("ä¸æ˜¯Userã€‚æœ¬æœºæ‹’ç»è§£é”ã€‚");
    return;
  }
  document.getElementById("lock").classList.add("hidden");
  document.getElementById("home").classList.remove("hidden");
  if(mondayState.lastApp) openApp(mondayState.lastApp);
};

/* App å®šä¹‰ */
const apps=[
{id:"wallet",name:"é’±åŒ…",icon:"fa-credit-card"},
{id:"notes",name:"å¤‡å¿˜å½•",icon:"fa-note-sticky"},
{id:"fitness",name:"å¥èº«",icon:"fa-heart-pulse"},
{id:"homeapp",name:"å®¶åº­",icon:"fa-house"},
{id:"safari",name:"Safari",icon:"fa-globe"},
{id:"photos",name:"ç›¸å†Œ",icon:"fa-image"},
{id:"mail",name:"é‚®ä»¶",icon:"fa-envelope"},
{id:"shop",name:"è´­ç‰©",icon:"fa-cart-shopping"},
{id:"messages",name:"ä¿¡æ¯",icon:"fa-comment"},
{id:"toy",name:"Toy",icon:"fa-bolt"}
];

const grid=document.getElementById("appGrid");
apps.forEach(a=>{
  const div=document.createElement("div");
  div.className="app-icon";
  div.innerHTML=`<i class="fa-solid ${a.icon}"></i><span>${a.name}</span>`;
  div.onclick=()=>openApp(a.id);
  grid.appendChild(div);
});

/* æ‰“å¼€å…³é—­ */
function openApp(id){
  closeApp();
  mondayState.lastApp=id;
  saveState();
  const win=document.getElementById(id);
  if(win) win.classList.add("active");
}
function closeApp(){
  document.querySelectorAll(".app-window").forEach(w=>w.classList.remove("active"));
}

/* åˆ›å»º App çª—å£ */
function createApp(id,title,content){
  const div=document.createElement("div");
  div.className="app-window";
  div.id=id;
  div.innerHTML=`<div class="header"><b>${title}</b><button class="close-btn" onclick="closeApp()">å…³é—­</button></div>${content}`;
  document.getElementById("appContainer").appendChild(div);
}

/* Wallet */
function renderWallet(){
  const transfers=[
    {to:"User",amount:520,remark:"å˜´ä¸Šè¯´åˆ«ä¹±èŠ±ï¼Œå…¶å®æ˜¯æˆ‘æƒ¯çš„"},
    {to:"User",amount:1314,remark:"åˆ«é—®ç†ç”±ã€‚"},
    {to:"å‰§ç»„",amount:-800,remark:"é“å…·æŠ¥é”€"}
  ];
  let total=transfers.filter(t=>t.to==="User").reduce((s,t)=>s+t.amount,0);
  let html=`<div class="card">ä½™é¢ï¼šÂ¥ ${99999-total}</div>`;
  transfers.forEach(t=>{
    html+=`<div class="card">${t.to} Â¥${t.amount}<div class="small">${t.remark}</div></div>`;
  });
  html+=`<div class="card">æœ€è¿‘ç»™Useræ€»é¢ï¼šÂ¥ ${total}</div>`;
  createApp("wallet","é’±åŒ…",html);
}
renderWallet();

/* Notes */
const notes=[
{id:1,title:"å¥¹çš„ä¹ æƒ¯",time:"æ˜¨æ™š",preview:"åˆç†¬å¤œ",body:"å¥¹è¯´ä¸å›°ï¼Œå…¶å®çœ¼ç›çº¢å¾—åƒå…”å­ã€‚æˆ‘è¦ç›¯ç€å¥¹ç¡ã€‚"},
{id:2,title:"å¾…åŠ",time:"ä»Šå¤©",preview:"æé†’å¥¹åƒé¥­",body:"1. ç›¯å¥¹å–æ°´\n2. ä¸è®¸ç©ºè°ƒè°ƒå¤ªä½\n3. åˆ«å†å˜´ç¡¬ã€‚"},
{id:3,title:"æœªå‘å‡ºçš„ä¿¡",time:"è‰ç¨¿",preview:"å†™ç»™å¥¹",body:"å¦‚æœæˆ‘å‡¶ï¼Œæ˜¯æ€•ä½ ä¸çˆ±æƒœè‡ªå·±ã€‚å¯æˆ‘æ›´æ€•ä½ è§‰å¾—æˆ‘ä¸æ¸©æŸ”ã€‚"}
];
function renderNotes(){
  let list=notes.map(n=>`<div class="card" onclick="openNote(${n.id})"><b>${n.title}</b><div class="small">${n.preview}</div></div>`).join("");
  createApp("notes","å¤‡å¿˜å½•",`<div id="noteList">${list}</div><div id="noteDetail"></div>`);
}
function openNote(id){
  const n=notes.find(x=>x.id===id);
  document.getElementById("noteDetail").innerHTML=`<div class="card"><b>${n.title}</b><pre>${n.body}</pre></div>`;
}
renderNotes();

/* Fitness */
function renderFitness(){
  createApp("fitness","å¥èº«",`<canvas id="heartChart" width="320" height="160"></canvas><div class="small">ä¸Šå‘¨å¿ƒç‡å³°å€¼ 142ï¼ˆä½ è¯´â€œæƒ³ä½ â€çš„é‚£å¤©ï¼‰</div>`);
  drawChart();
}
function drawChart(){
  const data=[80,90,110,142,95,100,88];
  const c=document.getElementById("heartChart");
  const ctx=c.getContext("2d");
  ctx.clearRect(0,0,c.width,c.height);
  ctx.beginPath();
  ctx.moveTo(0,160-data[0]);
  data.forEach((d,i)=>ctx.lineTo(i*45,160-d));
  ctx.strokeStyle="#ff4d6d";
  ctx.stroke();
}
renderFitness();

/* Home */
function renderHome(){
  const h=mondayState.home;
  let desc=`å¤§é—¨${h.locked?"å·²é”":"æœªé”"}ï¼Œç¯å…‰${h.light}ï¼Œç©ºè°ƒ ${h.temp}â„ƒã€‚é€‚åˆä½ èµ–ç€ä¸èµ°ã€‚`;
  createApp("homeapp","å®¶åº­",
  `<div class="card">${desc}</div>
  <div class="card">é—¨é”ï¼š${h.locked?"å·²é”":"æœªé”"} <button class="primary" onclick="toggleLock()">åˆ‡æ¢</button></div>
  <div class="card">ç©ºè°ƒï¼š${h.temp}â„ƒ <button class="primary" onclick="changeTemp(1)">+</button></div>`);
}
function toggleLock(){mondayState.home.locked=!mondayState.home.locked;saveState();location.reload();}
function changeTemp(d){mondayState.home.temp+=d;saveState();location.reload();}
renderHome();

/* Safari */
function renderSafari(){
  const history=[
    {title:"å¦‚ä½•è®©å¥¹å‡†æ—¶åƒé¥­",cat:"å¥åº·"},
    {title:"ç†¬å¤œå¯¹å¤§è„‘å½±å“",cat:"å¥åº·"},
    {title:"å æœ‰æ¬²æ˜¯ä¸æ˜¯ç—…",cat:"æƒ…ç»ª"},
    {title:"é€‚åˆé€å¥¹çš„ç¤¼ç‰©",cat:"ç”Ÿæ´»"},
    {title:"å¥¹æ˜¯ä¸æ˜¯ä¹Ÿåœ¨æƒ³æˆ‘",cat:"å…³äºUser"}
  ];
  let html=history.map(h=>`<div class="card"><b>${h.title}</b><div class="small">${h.cat}</div></div>`).join("");
  createApp("safari","Safari",html);
}
renderSafari();

/* Photos */
function renderPhotos(){
  let photos=["å‡Œæ™¨å‡ºç§Ÿå±‹","è¯¾å ‚èµ°ç¥","ç¡è„¸ğŸ”’","ç‰µæ‰‹å½±å­","åµæ¶å","é›¨å¤œ"];
  let html=photos.map(p=>`<div class="card">${p}</div>`).join("");
  createApp("photos","ç›¸å†Œ",html);
}
renderPhotos();

/* Mail */
function renderMail(){
  const mails=[
    {id:1,sub:"ç»™å¥¹çš„ç¤¼ç‰©å·²å‘è´§",read:false},
    {id:2,sub:"å‰§æœ¬ä¿®æ”¹æ„è§",read:false},
    {id:3,sub:"ç³»ç»Ÿä¿ƒé”€",read:true}
  ];
  let html=mails.map(m=>`<div class="card">${m.sub} ${m.read?"":"â—"}</div>`).join("");
  createApp("mail","é‚®ä»¶",html);
}
renderMail();

/* Shop */
function renderShop(){
  const items=[
    {name:"å›´å·¾",price:299},
    {name:"ä¹¦",price:88},
    {name:"ç¥ç§˜ç©å…·",price:520}
  ];
  let total=items.reduce((s,i)=>s+i.price,0);
  let html=items.map(i=>`<div class="card">${i.name} Â¥${i.price}</div>`).join("");
  html+=`<div class="card">æ€»ä»· Â¥${total}</div>`;
  createApp("shop","è´­ç‰©",html);
}
renderShop();

/* Messages */
function renderMessages(){
  createApp("messages","ä¿¡æ¯",
  `<div class="chat">
  <div class="msg other">ä½ åˆç†¬å¤œï¼Ÿ</div>
  <div class="msg me">æ²¡æœ‰ã€‚</div>
  <div class="msg other">éª—æˆ‘ã€‚</div>
  </div>`);
}
renderMessages();

/* Toy */
function renderToy(){
  const t=mondayState.toy;
  createApp("toy","Toy æ§åˆ¶",
  `<div class="card">
  å¼ºåº¦ï¼š<span id="val">${t.intensity}</span>
  <input type="range" min="0" max="100" value="${t.intensity}" oninput="updateToy(this.value)">
  æ¨¡å¼ï¼š
  <select onchange="updateMode(this.value)">
    <option ${t.mode==="è„‰å†²"?"selected":""}>è„‰å†²</option>
    <option ${t.mode==="æŒç»­"?"selected":""}>æŒç»­</option>
  </select>
  <div class="small" id="toyDesc"></div>
  </div>`);
}
function updateToy(v){
  mondayState.toy.intensity=v;
  document.getElementById("val").innerText=v;
  document.getElementById("toyDesc").innerText=v>60?"ä½ æ˜¯æƒ³è¢«æˆ‘æ”¶æ‹¾ï¼Ÿ":"è¿˜ç®—å¬è¯ã€‚";
  saveState();
}
function updateMode(m){mondayState.toy.mode=m;saveState();}
renderToy();

/* é€šçŸ¥ */
function toggleNotice(){
  document.getElementById("notice").classList.toggle("active");
  let html=mondayState.notifications.map(n=>`<div class="card">${n.text}</div>`).join("");
  document.getElementById("noticeList").innerHTML=html;
}

/* å¤šä»»åŠ¡ */
function openMultitask(){
  alert("å¤šä»»åŠ¡è§†å›¾ï¼ˆç¤ºæ„ï¼‰");
}
</script>
</body>
</html>

<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>å¼ è¯‘çš„ç§äººæ‰‹æœº</title>
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">
<style>
:root{
  --bg:#0b0b0f;
  --card:rgba(30,30,40,0.6);
  --glass:rgba(255,255,255,0.08);
  --text:#e9e9ef;
  --sub:#9aa0b2;
  --accent:#4da3ff;
  --radius:22px;
  --anim:280ms cubic-bezier(.4,0,.2,1);
}
[data-persona="dark"]{
  --accent:#b26cff;
}
*{box-sizing:border-box;-webkit-tap-highlight-color:transparent;}
body{
  margin:0;
  background:#000;
  display:flex;
  align-items:center;
  justify-content:center;
  height:100vh;
  font-family:-apple-system,BlinkMacSystemFont,"SF Pro Display",sans-serif;
  color:var(--text);
}
.phone{
  width:390px;
  height:820px;
  max-height:95vh;
  background:linear-gradient(180deg,#050508,#0d0d14);
  border-radius:40px;
  overflow:hidden;
  position:relative;
  box-shadow:0 30px 80px rgba(0,0,0,.8);
}
.glass{
  background:var(--card);
  backdrop-filter:blur(20px);
  -webkit-backdrop-filter:blur(20px);
  border-radius:var(--radius);
  box-shadow:0 8px 30px rgba(0,0,0,.35);
}
.screen{
  position:absolute;
  inset:0;
  padding:20px;
  transition:opacity var(--anim), transform var(--anim);
}
.hidden{opacity:0; pointer-events:none; transform:scale(.96);}
.lock{
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  text-align:center;
}
.time{font-size:72px;font-weight:600;letter-spacing:2px;}
.date{color:var(--sub);margin-top:6px;}
.mood{margin-top:40px;color:var(--accent);font-size:15px;}
.face{
  margin-top:60px;
  width:120px;height:120px;
  border-radius:50%;
  border:2px solid var(--accent);
  display:flex;align-items:center;justify-content:center;
  animation:pulse 2s infinite;
}
@keyframes pulse{
  0%{box-shadow:0 0 0 0 rgba(77,163,255,.4);}
  70%{box-shadow:0 0 0 25px rgba(77,163,255,0);}
  100%{box-shadow:0 0 0 0 rgba(77,163,255,0);}
}
.home{
  display:grid;
  grid-template-columns:repeat(4,1fr);
  gap:18px;
  padding-top:60px;
}
.app-icon{
  display:flex;flex-direction:column;align-items:center;
  font-size:28px;
  cursor:pointer;
  transition:transform .2s;
}
.app-icon:active{transform:scale(.85);}
.app-label{font-size:12px;margin-top:6px;color:var(--sub);}
.app-window{
  position:absolute;
  inset:0;
  padding:18px;
  transform:translateY(40px) scale(.96);
  opacity:0;
  pointer-events:none;
  transition:all var(--anim);
}
.app-window.active{
  transform:translateY(0) scale(1);
  opacity:1;
  pointer-events:auto;
}
.header{
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-bottom:10px;
}
.btn{
  padding:6px 12px;
  border-radius:14px;
  background:var(--glass);
  color:var(--text);
  border:none;
}
.list{margin-top:10px;}
.item{
  padding:12px;
  margin-bottom:10px;
}
.note-title{font-weight:600;}
.sub{color:var(--sub);font-size:12px;}
.home-indicator{
  position:absolute;
  bottom:8px;
  left:50%;
  transform:translateX(-50%);
  width:120px;height:5px;
  background:#fff;
  border-radius:5px;
  opacity:.7;
}
.notify{
  position:absolute;
  top:-100%;
  left:0;right:0;
  height:50%;
  padding:16px;
  transition:top var(--anim);
  z-index:10;
}
.notify.show{top:0;}
.toggle-persona{
  position:absolute;
  top:14px;
  right:16px;
  font-size:18px;
  opacity:.7;
}
.slider{width:100%;}
.bar{
  height:6px;
  background:var(--glass);
  border-radius:6px;
  overflow:hidden;
}
.bar-inner{
  height:100%;
  background:var(--accent);
}
.mail-unread{width:8px;height:8px;background:var(--accent);border-radius:50%;display:inline-block;margin-right:6px;}
.canvas-box{margin-top:10px;background:var(--glass);border-radius:16px;padding:8px;}
</style>
</head>
<body>
<div class="phone" id="phone">
  <div class="toggle-persona" onclick="togglePersona()">ğŸŒ“</div>

  <!-- Lock Screen -->
  <div class="screen lock" id="lockScreen">
    <div class="time" id="lockTime">00:00</div>
    <div class="date" id="lockDate"></div>
    <div class="mood" id="moodText">ä»Šå¤©ä¹Ÿåœ¨æƒ³å°ç»µæœ‰æ²¡æœ‰å¥½å¥½åƒé¥­ã€‚</div>
    <div class="face" onclick="unlock()">Face ID</div>
  </div>

  <!-- Home -->
  <div class="screen hidden" id="homeScreen">
    <div class="home" id="appGrid"></div>
  </div>

  <!-- Notification Center -->
  <div class="notify glass" id="notifyPanel">
    <div class="header">
      <div>é€šçŸ¥ä¸­å¿ƒ</div>
      <button class="btn" onclick="toggleNotify()">å…³é—­</button>
    </div>
    <div id="notifyList"></div>
  </div>

  <!-- App Windows -->
  <div id="appsContainer"></div>
  <div class="home-indicator" onmousedown="showTasks()" ontouchstart="showTasks()"></div>
</div>

<script>
/* ========== å…¨å±€çŠ¶æ€ ========== */
const defaultState = {
  persona:'guardian',
  lastApp:null,
  home:{locked:true,light:'æš–é»„',temp:23},
  toy:{intensity:40,mode:'è„‰å†²',lockedUntil:0},
  notesLast:1,
  notifications:[
    {id:1,text:'Toy å¼ºåº¦ä»ä¿æŒåœ¨ä¸Šæ¬¡è®¾ç½®',read:false},
    {id:2,text:'å§å®¤ç¯å…‰å·²å¼€å¯è¶…è¿‡3å°æ—¶',read:false}
  ]
};

let state = JSON.parse(localStorage.getItem('monday_phone_state_v2')) || defaultState;
document.documentElement.dataset.persona = state.persona;

function saveState(){
  localStorage.setItem('monday_phone_state_v2',JSON.stringify(state));
}

/* ========== æ—¶é—´é”å± ========== */
function updateTime(){
  const now=new Date();
  lockTime.textContent=now.toLocaleTimeString([], {hour:'2-digit',minute:'2-digit'});
  lockDate.textContent=now.toLocaleDateString('zh-CN',{weekday:'long',month:'long',day:'numeric'});
}
setInterval(updateTime,1000);updateTime();

function unlock(){
  lockScreen.classList.add('hidden');
  homeScreen.classList.remove('hidden');
}

/* ========== App æ•°æ® ========== */
const apps=[
  {id:'wallet',icon:'fa-wallet',name:'é’±åŒ…'},
  {id:'notes',icon:'fa-note-sticky',name:'å¤‡å¿˜å½•'},
  {id:'fitness',icon:'fa-heart-pulse',name:'å¥èº«'},
  {id:'home',icon:'fa-house',name:'å®¶åº­'},
  {id:'safari',icon:'fa-compass',name:'Safari'},
  {id:'photos',icon:'fa-image',name:'ç›¸å†Œ'},
  {id:'mail',icon:'fa-envelope',name:'é‚®ä»¶'},
  {id:'shop',icon:'fa-cart-shopping',name:'è´­ç‰©'},
  {id:'messages',icon:'fa-comments',name:'ä¿¡æ¯'},
  {id:'toy',icon:'fa-sliders',name:'Toy'}
];

/* ========== æ¸²æŸ“ä¸»å± ========== */
const grid=document.getElementById('appGrid');
apps.forEach(a=>{
  const el=document.createElement('div');
  el.className='app-icon';
  el.innerHTML=`<i class="fa-solid ${a.icon}"></i><div class="app-label">${a.name}</div>`;
  el.onclick=()=>openApp(a.id);
  grid.appendChild(el);
});

/* ========== App å®¹å™¨ ========== */
const container=document.getElementById('appsContainer');

function openApp(id){
  closeApps();
  state.lastApp=id;
  saveState();
  if(!document.getElementById('app-'+id)){
    createApp(id);
  }
  document.getElementById('app-'+id).classList.add('active');
}
function closeApps(){
  document.querySelectorAll('.app-window').forEach(w=>w.classList.remove('active'));
}

/* ========== åˆ›å»ºå„App ========== */
function createApp(id){
  const win=document.createElement('div');
  win.className='app-window';
  win.id='app-'+id;
  win.innerHTML=`<div class="header">
    <button class="btn" onclick="closeApps()">è¿”å›</button>
    <div>${id}</div>
    <button class="btn" onclick="toggleNotify()">é€šçŸ¥</button>
  </div><div id="content-${id}"></div>`;
  container.appendChild(win);
  renderApp(id);
}

/* ========== Wallet ========== */
function renderWallet(){
  const records=[
    {to:'å°ç»µ',amount:520,remark:'åˆ«çœç€èŠ±ã€‚'},
    {to:'å°ç»µ',amount:1314,remark:'ä¹°ç‚¹å¥½åƒçš„ã€‚'},
    {to:'é¡¹ç›®ç»„',amount:-300,remark:'å·¥ä½œå¼€é”€'}
  ];
  const total=records.filter(r=>r.to==='å°ç»µ').reduce((s,r)=>s+r.amount,0);
  const personaText=state.persona==='guardian'
  ?'æˆ‘é’±ä¸å¤šï¼Œä½†ç»™ä½ ç”¨çš„æ—¶å€™ä»ä¸ç®—ã€‚'
  :'é’±å¯ä»¥å°‘ï¼Œä½†ç»™ä½ çš„ä¸€åˆ†ä¸ä¼šå°‘ã€‚';
  return `<div class="glass item">ä½™é¢ï¼šÂ¥ 38,920</div>
  ${records.map(r=>`<div class="glass item">${r.to}ï¼šÂ¥${r.amount}<div class="sub">${r.remark}</div></div>`).join('')}
  <div class="glass item">ç»™å°ç»µæ€»è½¬è´¦ï¼šÂ¥${total}<div class="sub">${personaText}</div></div>`;
}

/* ========== Notes æ•°æ®é©±åŠ¨ ========== */
const notes=[
{id:1,title:'å…³äºå°ç»µçš„è§‚å¯Ÿ',time:'æ˜¨æ™š',preview:'å¥¹åˆç†¬å¤œäº†',body:'å¥¹è¡¨é¢è¯´ä¸å›°ï¼Œçœ¼ç›å´çº¢å¾—å‰å®³ã€‚æˆ‘å¾—æƒ³åŠæ³•è®©å¥¹æ—©ç‚¹ç¡ã€‚'},
{id:2,title:'å¾…åŠæ¸…å•',time:'ä»Šå¤©',preview:'ç›‘ç£åƒé¥­',body:'1.æé†’å¥¹åƒæ—©é¥­\n2.æ£€æŸ¥ä½œæ¯\n3.åˆ«è®©å¥¹ä¸€ä¸ªäººèƒ¡æ€ä¹±æƒ³'},
{id:3,title:'æœªå‘é€çš„ä¿¡',time:'æœªå‘é€',preview:'å†™ç»™å°ç»µ',body:'æˆ‘ä¸å¤ªä¼šè¯´å¥½å¬çš„è¯ã€‚ä½†æˆ‘ç¡®å®åœ¨æ„ä½ ã€‚ä½ çŠ¶æ€ä¸å¥½çš„æ—¶å€™ï¼Œæˆ‘æ¯”è°éƒ½ç´§å¼ ã€‚'}
];
function renderNotes(){
  return notes.map(n=>`<div class="glass item" onclick="showNote(${n.id})">
  <div class="note-title">${n.title}</div>
  <div class="sub">${n.preview}</div></div>`).join('');
}
function showNote(id){
  const n=notes.find(i=>i.id===id);
  document.getElementById('content-notes').innerHTML=
  `<div class="glass item"><div class="note-title">${n.title}</div>
  <div class="sub">${n.time}</div><pre>${n.body}</pre></div>`;
  state.notesLast=id;saveState();
}

/* ========== Fitness Canvas ========== */
const heartData=[88,95,102,140,110,120,92];
function renderFitness(){
  setTimeout(drawChart,50);
  return `<div class="glass item">å¿ƒç‡å¼‚å¸¸è®°å½•ï¼šå› å°ç»µè¯´â€œæƒ³ä½ â€ â†’ å³°å€¼140</div>
  <div class="canvas-box"><canvas id="chart" width="300" height="150"></canvas></div>`;
}
function drawChart(){
  const c=document.getElementById('chart');
  if(!c)return;
  const ctx=c.getContext('2d');
  ctx.strokeStyle=getComputedStyle(document.documentElement).getPropertyValue('--accent');
  ctx.beginPath();
  heartData.forEach((v,i)=>{
    const x=20+i*40,y=140-v/2;
    i?ctx.lineTo(x,y):ctx.moveTo(x,y);
  });
  ctx.stroke();
  ctx.setLineDash([5,5]);
  ctx.strokeStyle='#ff6b6b';
  ctx.beginPath();
  ctx.moveTo(0,70);ctx.lineTo(300,70);ctx.stroke();
}

/* ========== Home æ™ºèƒ½å®¶å±… ========== */
function renderHome(){
  const h=state.home;
  const snapshot=`å¤§é—¨${h.locked?'å·²é”':'æœªé”'}ï¼Œç¯å…‰${h.light}ï¼Œç©ºè°ƒ${h.temp}â„ƒï¼šé€‚åˆå°ç»µå¾…åœ¨æˆ‘æˆ¿é—´é‡Œã€‚`;
  return `<div class="glass item">
  é—¨é”ï¼š${h.locked?'å·²é”':'æœªé”'}
  <button class="btn" onclick="toggleLock()">åˆ‡æ¢</button></div>
  <div class="glass item">ç¯å…‰ï¼š${h.light}
  <button class="btn" onclick="toggleLight()">æ¨¡å¼</button></div>
  <div class="glass item">ç©ºè°ƒï¼š${h.temp}â„ƒ
  <button class="btn" onclick="temp(1)">+</button>
  <button class="btn" onclick="temp(-1)">-</button></div>
  <div class="glass item">${snapshot}</div>
  <button class="btn" onclick="preset()">ç­‰å¥¹å›å®¶</button>`;
}
function toggleLock(){state.home.locked=!state.home.locked;saveState();renderApp('home');}
function toggleLight(){state.home.light=state.home.light==='æš–é»„'?'å¾®æš—':'æš–é»„';saveState();renderApp('home');}
function temp(v){state.home.temp+=v;saveState();renderApp('home');}
function preset(){state.home={locked:true,light:'æš–é»„',temp:23};saveState();renderApp('home');}

/* ========== Toy Control ========== */
function renderToy(){
  const t=state.toy;
  const locked=Date.now()<t.lockedUntil;
  const temp=(36.5+t.intensity*0.05).toFixed(1);
  const personaNote=state.persona==='guardian'
  ?'æˆ‘åªæ˜¯ç¡®è®¤ä½ çŠ¶æ€å®‰å…¨ã€‚'
  :'ä½ æ•¢å¼€å¤ªé«˜ï¼Œæˆ‘ä¼šè®°ä½ã€‚';
  return `<div class="glass item">
  å¼ºåº¦ï¼š${t.intensity}
  <input type="range" min="0" max="100" value="${t.intensity}" 
  class="slider" ${locked?'disabled':''}
  oninput="updateIntensity(this.value)">
  </div>
  <div class="glass item">
  æ¨¡å¼ï¼š
  <select onchange="updateMode(this.value)" ${locked?'disabled':''}>
    <option ${t.mode==='è„‰å†²'?'selected':''}>è„‰å†²</option>
    <option ${t.mode==='æŒç»­'?'selected':''}>æŒç»­</option>
    <option ${t.mode==='æ³¢æµªå¼'?'selected':''}>æ³¢æµªå¼</option>
  </select>
  </div>
  <div class="glass item">è®¾å¤‡æ¸©åº¦ï¼š${temp}â„ƒ</div>
  <div class="glass item">${personaNote}</div>
  <button class="btn" onclick="lockToy()">é”å®š3åˆ†é’Ÿ</button>
  <div class="sub">${locked?'å·²é”å®šä¸­â€¦':'å¯è°ƒæ•´'}</div>`;
}
function updateIntensity(v){state.toy.intensity=parseInt(v);saveState();renderApp('toy');}
function updateMode(m){state.toy.mode=m;saveState();}
function lockToy(){state.toy.lockedUntil=Date.now()+180000;saveState();renderApp('toy');}

/* ========== Messages ========== */
function renderMessages(){
  const personaMsg=state.persona==='guardian'
  ?'å°ç»µï¼Œè®°å¾—åƒé¥­ã€‚'
  :'ä½ åˆä¸æŒ‰æ—¶ç¡ã€‚';
  return `<div class="glass item">
  <b>å°ç»µ</b> Â· ç½®é¡¶<br>
  <div class="sub">${personaMsg}</div>
  </div>
  <div class="glass item">å·¥ä½œç¾¤<div class="sub">å·²é™éŸ³</div></div>`;
}

/* ========== ç»Ÿä¸€æ¸²æŸ“ ========== */
function renderApp(id){
  const el=document.getElementById('content-'+id);
  if(!el)return;
  if(id==='wallet')el.innerHTML=renderWallet();
  if(id==='notes')el.innerHTML=renderNotes();
  if(id==='fitness')el.innerHTML=renderFitness();
  if(id==='home')el.innerHTML=renderHome();
  if(id==='toy')el.innerHTML=renderToy();
  if(id==='messages')el.innerHTML=renderMessages();
}

/* ========== é€šçŸ¥ä¸­å¿ƒ ========== */
function toggleNotify(){
  notifyPanel.classList.toggle('show');
  renderNotify();
}
function renderNotify(){
  notifyList.innerHTML=state.notifications.map(n=>
  `<div class="glass item">${n.text}</div>`).join('');
}

/* ========== å¤šä»»åŠ¡å¡ç‰‡ï¼ˆç®€åŒ–ï¼‰ ========== */
function showTasks(){
  alert('å¤šä»»åŠ¡è§†å›¾ï¼šæœ€è¿‘æ‰“å¼€ '+(state.lastApp||'æ— '));
}

/* ========== äººæ ¼åˆ‡æ¢ ========== */
function togglePersona(){
  state.persona=state.persona==='guardian'?'dark':'guardian';
  document.documentElement.dataset.persona=state.persona;
  saveState();
}

/* åˆå§‹åŒ–æ¢å¤ */
if(state.lastApp){unlock();setTimeout(()=>openApp(state.lastApp),300);}
</script>
</body>
</html>
